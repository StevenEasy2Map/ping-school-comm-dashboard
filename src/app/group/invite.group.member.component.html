<div *ngIf="loading" class="ping-loading-parent">
  <div class="ping-loading preloader-wrapper active">
    <div class="spinner-layer spinner-red-only">
      <div class="circle-clipper left">
        <div class="circle"></div>
      </div>
      <div class="gap-patch">
        <div class="circle"></div>
      </div>
      <div class="circle-clipper right">
        <div class="circle"></div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!loading" class="container row" style=" margin-top:20px;">

  <div class="col s12">
    <h4 *ngIf="!inviteUsers" class="group-created">Congratulations, your group has been created!</h4>
    <h5>Your Group's invite token is <span style="font-weight:bold">{{token}}</span></h5>
    <p class="group-invite-token-explain">In the SchoolComm smartphone app, users can use this token to join
      your group</p>
  </div>
  <div *ngIf="!inviteUsers" class="col s6" style="text-align: center;margin-top:30px;">
    <button (click)="goHome()"
            class="btn waves-effect waves-light" type="button" name="action">Done
      <i class="material-icons right">done</i>
    </button>
  </div>
  <div *ngIf="!inviteUsers" class="col s6" style="text-align: center;margin-top:30px;">
    <button (click)="inviteUsersViaEmail()"
            class="btn waves-effect waves-light" type="button" name="action">Invite users via email
      <i class="material-icons right">email</i>
    </button>
  </div>

</div>

<div *ngIf="inviteUsers" class="row container">
  <form #loginForm="ngForm" class="col s12">
    <div class="row">
      <div role="alert" *ngIf="error" class="col s12">
        <span class="red-text text-darken-4">{{ error }}</span>
      </div>
    </div>

    <div class="row">
      <div class="input-field col s12">
        <h6>Invite users to your group via email <span class="small-text">(press the <b>'Enter'</b> key after typing each email address)</span></h6>

        <tag-input [(ngModel)]="emailAddresses" name="emailAddresses"
                   [modelAsStrings]="true"
                   (onAdd)="onAdd($event)"
                   (onRemove)="onRemove($event)"
                   [separatorKeyCodes]="[32, 188]"
                   secondaryPlaceholder="Enter email address"
                   placeholder="Enter email address">
        </tag-input>

        <!--div style="max-width:800px;"
             autocomplete="off"
             class="chips chips-placeholder email-invite"
             materialize="material_chip"
             [materializeParams]="[autocompleteInit]"
             (chip.add)="add($event.detail)"
             (chip.delete)="delete($event.detail)"
             (chip.select)="select($event.detail)"></div>-->

      </div>
    </div>

    <div class="row" style="margin-top:-15px;">
      <div class="input-field col s12">
        <h6>Add a message (optional)</h6>
        <textarea [(ngModel)]="motivation"
                  id="motivation" style="max-width:500px;height:100px;"
                  name="motivation" class="materialize-textarea"
                  data-length="512"></textarea>
        <label style="display: none" for="motivation">Textarea</label>

      </div>
    </div>

    <div class="row">

      <div class="input-field col s12">
        <h6>Users' Role</h6>
        <select [(ngModel)]="role" id="role" name="role" style="max-width: 500px;">
          <option selected="selected" value="user">user</option>
          <option value="admin">administrator</option>
        </select>
      </div>

    </div>

    <div class="row">
      <div class="col s12 submit-button-parent">

        <button (click)="goHome()"
                class="btn waves-effect waves-light" style="float:left;margin-left:80px;" type="submit" name="action">Cancel
          <i class="material-icons right">clear</i>
        </button>

        <button [disabled]="!loginForm.form.valid" (click)="inviteGroupMembers()"
                class="btn waves-effect waves-light" style="float:right;margin-right:80px;" type="submit" name="action">Submit
          <i class="material-icons right">send</i>
        </button>
      </div>
    </div>
  </form>
</div>
